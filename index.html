<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Currency Exchanger</title>
    <style>
        /* All your existing CSS remains the same */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #667eea;
            --secondary-color: #764ba2;
            --bg-color: #ffffff;
            --card-bg: #ffffff;
            --text-color: #333333;
            --text-muted: #666666;
            --border-color: #e1e5e9;
            --input-bg: #ffffff;
            --result-bg: #f8f9fa;
            --error-bg: #ffeaea;
            --shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            --gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        [data-theme="dark"] {
            --primary-color: #7c93f5;
            --secondary-color: #8a6bb8;
            --bg-color: #1a1a1a;
            --card-bg: #2d2d2d;
            --text-color: #ffffff;
            --text-muted: #b0b0b0;
            --border-color: #404040;
            --input-bg: #3d3d3d;
            --result-bg: #3d3d3d;
            --error-bg: #4a2a2a;
            --shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            --gradient: linear-gradient(135deg, #7c93f5 0%, #8a6bb8 100%);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--gradient);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            position: relative;
            color: var(--text-color);
            transition: all 0.3s ease;
        }

        .container {
            width: 100%;
            max-width: 900px;
        }

        /* Theme Toggle Button */
        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: 50px;
            padding: 10px 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            font-weight: 600;
            color: var(--text-color);
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }

        .theme-toggle:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
        }

        .theme-icon {
            font-size: 18px;
        }

        .converter-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 40px;
            box-shadow: var(--shadow);
            backdrop-filter: blur(10px);
            position: relative;
            transition: all 0.3s ease;
        }

        h1 {
            text-align: center;
            color: var(--text-color);
            margin-bottom: 10px;
            font-size: clamp(1.8rem, 4vw, 2.5rem);
        }

        .subtitle {
            text-align: center;
            color: var(--text-muted);
            margin-bottom: 30px;
            font-size: clamp(0.9rem, 2.5vw, 1.1rem);
        }

        .input-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-color);
        }

        input[type="number"] {
            width: 100%;
            padding: 15px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s ease;
            background: var(--input-bg);
            color: var(--text-color);
        }

        input[type="number"]:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .currency-selection {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 20px;
            align-items: end;
            margin-bottom: 30px;
        }

        .currency-group {
            flex: 1;
        }

        .search-container {
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 12px 40px 12px 12px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            margin-bottom: 10px;
            font-size: 14px;
            background: var(--input-bg) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23666'%3E%3Cpath d='M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z'/%3E%3C/svg%3E") no-repeat right 12px center / 20px;
            color: var(--text-color);
            transition: border-color 0.3s ease;
        }

        [data-theme="dark"] .search-input {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23b0b0b0'%3E%3Cpath d='M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z'/%3E%3C/svg%3E");
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .currency-select {
            width: 100%;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            max-height: 200px;
            overflow-y: auto;
            font-size: 14px;
            background: var(--input-bg);
            color: var(--text-color);
        }

        .currency-select option {
            padding: 10px 12px;
            border-bottom: 1px solid var(--border-color);
            cursor: pointer;
            transition: background-color 0.2s;
            font-size: 13px;
        }

        .currency-select option:hover {
            background-color: var(--result-bg);
        }

        .currency-select option:checked {
            background-color: var(--primary-color);
            color: white;
        }

        /* Scrollbar styling for currency select */
        .currency-select::-webkit-scrollbar {
            width: 8px;
        }

        .currency-select::-webkit-scrollbar-track {
            background: var(--result-bg);
            border-radius: 0 10px 10px 0;
        }

        .currency-select::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 4px;
        }

        .currency-select::-webkit-scrollbar-thumb:hover {
            background: var(--text-muted);
        }

        .swap-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .swap-btn:hover {
            background: var(--secondary-color);
            transform: rotate(180deg);
        }

        .convert-btn {
            width: 100%;
            background: var(--gradient);
            color: white;
            border: none;
            padding: 18px;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease;
            margin-bottom: 20px;
        }

        .convert-btn:hover {
            transform: translateY(-2px);
        }

        .convert-btn:active {
            transform: translateY(0);
        }

        .result {
            text-align: center;
            padding: 25px;
            background: var(--result-bg);
            border-radius: 12px;
            margin-bottom: 15px;
            display: none;
        }

        #conversionResult {
            font-size: clamp(1.2rem, 4vw, 1.5rem);
            font-weight: bold;
            color: var(--text-color);
            margin-bottom: 8px;
        }

        .exchange-rate {
            font-size: 14px;
            color: var(--text-muted);
            font-style: italic;
        }

        .error-message {
            color: #e74c3c;
            text-align: center;
            padding: 15px;
            background: var(--error-bg);
            border-radius: 8px;
            display: none;
            border-left: 4px solid #e74c3c;
        }

        /* Designer credit styles */
        .designer-credit {
            text-align: center;
            margin-top: 30px;
            padding: 15px;
            color: var(--text-muted);
            font-size: 14px;
            font-style: italic;
            border-top: 1px solid var(--border-color);
            background: var(--result-bg);
            border-radius: 0 0 15px 15px;
            margin: 30px -40px -40px -40px;
        }

        .designer-credit strong {
            color: var(--primary-color);
            font-weight: 600;
        }

        /* Loading animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Mobile-First Responsive Design */
        @media (max-width: 768px) {
            body {
                padding: 15px;
            }

            .theme-toggle {
                top: 10px;
                right: 10px;
                padding: 8px 12px;
                font-size: 12px;
            }

            .converter-card {
                padding: 25px;
                border-radius: 15px;
            }

            .currency-selection {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .swap-btn {
                justify-self: center;
                margin: 10px 0;
                order: 3;
                width: 45px;
                height: 45px;
                font-size: 18px;
            }

            .currency-select {
                max-height: 150px;
                font-size: 13px;
            }

            .designer-credit {
                margin: 25px -25px -25px -25px;
                font-size: 13px;
                padding: 12px;
            }

            .input-group {
                margin-bottom: 20px;
            }

            input[type="number"] {
                padding: 12px;
                font-size: 16px;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 10px;
            }

            .converter-card {
                padding: 20px;
                border-radius: 12px;
            }

            .theme-toggle {
                top: 5px;
                right: 5px;
                padding: 6px 10px;
                font-size: 11px;
            }

            .theme-icon {
                font-size: 16px;
            }

            .currency-select {
                font-size: 12px;
                max-height: 120px;
            }

            .currency-select option {
                padding: 8px 10px;
                font-size: 12px;
            }

            .designer-credit {
                margin: 20px -20px -20px -20px;
                padding: 10px;
                font-size: 12px;
            }

            .convert-btn {
                padding: 15px;
                font-size: 16px;
            }

            .result {
                padding: 20px;
            }

            .search-input {
                font-size: 16px;
                padding: 10px 35px 10px 10px;
            }
        }
    </style>
</head>
<body>
<!-- Theme Toggle Button -->
<button class="theme-toggle" id="themeToggle">
    <span class="theme-icon" id="themeIcon">ðŸŒ™</span>
    <span id="themeText">Dark Mode</span>
</button>

<div class="container">
    <div class="converter-card">
        <h1>ðŸ’± Currency Exchanger</h1>
        <p class="subtitle">Get real-time exchange rates with 160+ world currencies</p>

        <div class="converter-form">
            <div class="input-group">
                <label for="amount">Amount:</label>
                <input type="number" id="amount" placeholder="Enter amount" value="1" min="0" step="0.01">
            </div>

            <div class="currency-selection">
                <div class="currency-group">
                    <label for="fromCurrency">From Currency:</label>
                    <div class="search-container">
                        <input type="text" id="fromSearch" placeholder="Search currency..." class="search-input">
                        <select id="fromCurrency" size="5" class="currency-select">
                            <!-- Options will be populated by JavaScript -->
                        </select>
                    </div>
                </div>

                <button id="swapBtn" class="swap-btn" title="Swap currencies">â‡„</button>

                <div class="currency-group">
                    <label for="toCurrency">To Currency:</label>
                    <div class="search-container">
                        <input type="text" id="toSearch" placeholder="Search currency..." class="search-input">
                        <select id="toCurrency" size="5" class="currency-select">
                            <!-- Options will be populated by JavaScript -->
                        </select>
                    </div>
                </div>
            </div>

            <button id="convertBtn" class="convert-btn">Convert Currency</button>

            <div id="result" class="result">
                <div id="conversionResult"></div>
                <div id="exchangeRate" class="exchange-rate"></div>
            </div>

            <div id="error" class="error-message"></div>

            <!-- Designer Credit -->
            <div class="designer-credit">
                Designed by <strong>Danish Umer</strong>
            </div>
        </div>
    </div>
</div>

<script>
    class CurrencyConverter {
        constructor() {
            this.currencies = {};
            this.filteredFromCurrencies = [];
            this.filteredToCurrencies = [];
            this.currentTheme = localStorage.getItem('theme') || 'light';
            this.apiKey = 'fbe7af2aecd184a99cae235d'; // Your API key
            this.init();
        }

        async init() {
            this.setTheme(this.currentTheme);
            this.setupThemeToggle();
            await this.loadCurrencies();
            this.setupEventListeners();
            this.setDefaultCurrencies();
            this.updateCurrencyCount();
        }

        setupThemeToggle() {
            const themeToggle = document.getElementById('themeToggle');
            const themeIcon = document.getElementById('themeIcon');
            const themeText = document.getElementById('themeText');

            themeToggle.addEventListener('click', () => {
                this.currentTheme = this.currentTheme === 'light' ? 'dark' : 'light';
                this.setTheme(this.currentTheme);
                localStorage.setItem('theme', this.currentTheme);
            });

            this.updateThemeButton(themeIcon, themeText);
        }

        setTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            this.updateThemeButton();
        }

        updateThemeButton() {
            const themeIcon = document.getElementById('themeIcon');
            const themeText = document.getElementById('themeText');

            if (this.currentTheme === 'dark') {
                themeIcon.textContent = 'â˜€ï¸';
                themeText.textContent = 'Light Mode';
            } else {
                themeIcon.textContent = 'ðŸŒ™';
                themeText.textContent = 'Dark Mode';
            }
        }

        async loadCurrencies() {
            // Comprehensive list of all world currencies
            this.currencies = {
                "AED": "United Arab Emirates Dirham",
                "AFN": "Afghan Afghani",
                "ALL": "Albanian Lek",
                "AMD": "Armenian Dram",
                "ANG": "Netherlands Antillean Guilder",
                "AOA": "Angolan Kwanza",
                "ARS": "Argentine Peso",
                "AUD": "Australian Dollar",
                "AWG": "Aruban Florin",
                "AZN": "Azerbaijani Manat",
                "BAM": "Bosnia-Herzegovina Convertible Mark",
                "BBD": "Barbadian Dollar",
                "BDT": "Bangladeshi Taka",
                "BGN": "Bulgarian Lev",
                "BHD": "Bahraini Dinar",
                "BIF": "Burundian Franc",
                "BMD": "Bermudian Dollar",
                "BND": "Brunei Dollar",
                "BOB": "Bolivian Boliviano",
                "BRL": "Brazilian Real",
                "BSD": "Bahamian Dollar",
                "BTN": "Bhutanese Ngultrum",
                "BWP": "Botswanan Pula",
                "BYN": "Belarusian Ruble",
                "BZD": "Belize Dollar",
                "CAD": "Canadian Dollar",
                "CDF": "Congolese Franc",
                "CHF": "Swiss Franc",
                "CLP": "Chilean Peso",
                "CNY": "Chinese Yuan",
                "COP": "Colombian Peso",
                "CRC": "Costa Rican ColÃ³n",
                "CUP": "Cuban Peso",
                "CVE": "Cape Verdean Escudo",
                "CZK": "Czech Republic Koruna",
                "DJF": "Djiboutian Franc",
                "DKK": "Danish Krone",
                "DOP": "Dominican Peso",
                "DZD": "Algerian Dinar",
                "EGP": "Egyptian Pound",
                "ERN": "Eritrean Nakfa",
                "ETB": "Ethiopian Birr",
                "EUR": "Euro",
                "FJD": "Fijian Dollar",
                "FKP": "Falkland Islands Pound",
                "FOK": "Faroese KrÃ³na",
                "GBP": "British Pound Sterling",
                "GEL": "Georgian Lari",
                "GGP": "Guernsey Pound",
                "GHS": "Ghanaian Cedi",
                "GIP": "Gibraltar Pound",
                "GMD": "Gambian Dalasi",
                "GNF": "Guinean Franc",
                "GTQ": "Guatemalan Quetzal",
                "GYD": "Guyanaese Dollar",
                "HKD": "Hong Kong Dollar",
                "HNL": "Honduran Lempira",
                "HRK": "Croatian Kuna",
                "HTG": "Haitian Gourde",
                "HUF": "Hungarian Forint",
                "IDR": "Indonesian Rupiah",
                "ILS": "Israeli New Shekel",
                "IMP": "Manx Pound",
                "INR": "Indian Rupee",
                "IQD": "Iraqi Dinar",
                "IRR": "Iranian Rial",
                "ISK": "Icelandic KrÃ³na",
                "JEP": "Jersey Pound",
                "JMD": "Jamaican Dollar",
                "JOD": "Jordanian Dinar",
                "JPY": "Japanese Yen",
                "KES": "Kenyan Shilling",
                "KGS": "Kyrgystani Som",
                "KHR": "Cambodian Riel",
                "KID": "Kiribati Dollar",
                "KMF": "Comorian Franc",
                "KRW": "South Korean Won",
                "KWD": "Kuwaiti Dinar",
                "KYD": "Cayman Islands Dollar",
                "KZT": "Kazakhstani Tenge",
                "LAK": "Laotian Kip",
                "LBP": "Lebanese Pound",
                "LKR": "Sri Lankan Rupee",
                "LRD": "Liberian Dollar",
                "LSL": "Lesotho Loti",
                "LYD": "Libyan Dinar",
                "MAD": "Moroccan Dirham",
                "MDL": "Moldovan Leu",
                "MGA": "Malagasy Ariary",
                "MKD": "Macedonian Denar",
                "MMK": "Myanmar Kyat",
                "MNT": "Mongolian Tugrik",
                "MOP": "Macanese Pataca",
                "MRU": "Mauritanian Ouguiya",
                "MUR": "Mauritian Rupee",
                "MVR": "Maldivian Rufiyaa",
                "MWK": "Malawian Kwacha",
                "MXN": "Mexican Peso",
                "MYR": "Malaysian Ringgit",
                "MZN": "Mozambican Metical",
                "NAD": "Namibian Dollar",
                "NGN": "Nigerian Naira",
                "NIO": "Nicaraguan CÃ³rdoba",
                "NOK": "Norwegian Krone",
                "NPR": "Nepalese Rupee",
                "NZD": "New Zealand Dollar",
                "OMR": "Omani Rial",
                "PAB": "Panamanian Balboa",
                "PEN": "Peruvian Sol",
                "PGK": "Papua New Guinean Kina",
                "PHP": "Philippine Peso",
                "PKR": "Pakistani Rupee",
                "PLN": "Polish Zloty",
                "PYG": "Paraguayan Guarani",
                "QAR": "Qatari Rial",
                "RON": "Romanian Leu",
                "RSD": "Serbian Dinar",
                "RUB": "Russian Ruble",
                "RWF": "Rwandan Franc",
                "SAR": "Saudi Riyal",
                "SBD": "Solomon Islands Dollar",
                "SCR": "Seychellois Rupee",
                "SDG": "Sudanese Pound",
                "SEK": "Swedish Krona",
                "SGD": "Singapore Dollar",
                "SHP": "Saint Helena Pound",
                "SLL": "Sierra Leonean Leone",
                "SOS": "Somali Shilling",
                "SRD": "Surinamese Dollar",
                "SSP": "South Sudanese Pound",
                "STN": "SÃ£o TomÃ© and PrÃ­ncipe Dobra",
                "SYP": "Syrian Pound",
                "SZL": "Swazi Lilangeni",
                "THB": "Thai Baht",
                "TJS": "Tajikistani Somoni",
                "TMT": "Turkmenistan Manat",
                "TND": "Tunisian Dinar",
                "TOP": "Tongan Pa'anga",
                "TRY": "Turkish Lira",
                "TTD": "Trinidad and Tobago Dollar",
                "TVD": "Tuvaluan Dollar",
                "TWD": "New Taiwan Dollar",
                "TZS": "Tanzanian Shilling",
                "UAH": "Ukrainian Hryvnia",
                "UGX": "Ugandan Shilling",
                "USD": "United States Dollar",
                "UYU": "Uruguayan Peso",
                "UZS": "Uzbekistani Som",
                "VES": "Venezuelan BolÃ­var",
                "VND": "Vietnamese Dong",
                "VUV": "Vanuatu Vatu",
                "WST": "Samoan Tala",
                "XAF": "CFA Franc BEAC",
                "XCD": "East Caribbean Dollar",
                "XDR": "Special Drawing Rights",
                "XOF": "CFA Franc BCEAO",
                "XPF": "CFP Franc",
                "YER": "Yemeni Rial",
                "ZAR": "South African Rand",
                "ZMW": "Zambian Kwacha",
                "ZWL": "Zimbabwean Dollar"
            };

            this.filteredFromCurrencies = Object.keys(this.currencies);
            this.filteredToCurrencies = Object.keys(this.currencies);
            this.populateCurrencySelects();
        }

        populateCurrencySelects() {
            const fromSelect = document.getElementById('fromCurrency');
            const toSelect = document.getElementById('toCurrency');

            this.updateCurrencySelect(fromSelect, this.filteredFromCurrencies);
            this.updateCurrencySelect(toSelect, this.filteredToCurrencies);

            this.updateCurrencyCount();
        }

        updateCurrencySelect(select, currencyList) {
            const currentValue = select.value;
            select.innerHTML = '';

            currencyList.forEach(currencyCode => {
                const currencyName = this.currencies[currencyCode];
                const option = new Option(`${currencyCode} - ${currencyName}`, currencyCode);
                select.add(option);
            });

            if (currencyList.includes(currentValue)) {
                select.value = currentValue;
            } else if (currencyList.length > 0) {
                select.selectedIndex = 0;
            }
        }

        setupEventListeners() {
            // Convert button
            document.getElementById('convertBtn').addEventListener('click', () => {
                this.convertCurrency();
            });

            // Swap button
            document.getElementById('swapBtn').addEventListener('click', () => {
                this.swapCurrencies();
            });

            // Search functionality
            document.getElementById('fromSearch').addEventListener('input', (e) => {
                this.filterCurrencies('from', e.target.value);
            });

            document.getElementById('toSearch').addEventListener('input', (e) => {
                this.filterCurrencies('to', e.target.value);
            });

            // Enter key support
            document.getElementById('amount').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    this.convertCurrency();
                }
            });

            // Currency select changes
            document.getElementById('fromCurrency').addEventListener('change', () => {
                this.clearResults();
            });

            document.getElementById('toCurrency').addEventListener('change', () => {
                this.clearResults();
            });

            // Clear search on escape key
            document.getElementById('fromSearch').addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    e.target.value = '';
                    this.filterCurrencies('from', '');
                }
            });

            document.getElementById('toSearch').addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    e.target.value = '';
                    this.filterCurrencies('to', '');
                }
            });
        }

        filterCurrencies(type, searchTerm) {
            const search = searchTerm.toLowerCase().trim();

            if (type === 'from') {
                this.filteredFromCurrencies = Object.keys(this.currencies).filter(currencyCode => {
                    const currencyName = this.currencies[currencyCode].toLowerCase();
                    return currencyCode.toLowerCase().includes(search) ||
                           currencyName.includes(search);
                });
                this.updateCurrencySelect(document.getElementById('fromCurrency'), this.filteredFromCurrencies);
            } else {
                this.filteredToCurrencies = Object.keys(this.currencies).filter(currencyCode => {
                    const currencyName = this.currencies[currencyCode].toLowerCase();
                    return currencyCode.toLowerCase().includes(search) ||
                           currencyName.includes(search);
                });
                this.updateCurrencySelect(document.getElementById('toCurrency'), this.filteredToCurrencies);
            }

            this.updateCurrencyCount();
        }

        updateCurrencyCount() {
            const fromCount = document.getElementById('fromCurrency').options.length;
            const toCount = document.getElementById('toCurrency').options.length;
            console.log(`From currencies: ${fromCount}, To currencies: ${toCount}`);
        }

        setDefaultCurrencies() {
            setTimeout(() => {
                this.setCurrency('fromCurrency', 'USD');
                this.setCurrency('toCurrency', 'EUR');
            }, 100);
        }

        setCurrency(selectId, currencyCode) {
            const select = document.getElementById(selectId);
            for (let i = 0; i < select.options.length; i++) {
                if (select.options[i].value === currencyCode) {
                    select.selectedIndex = i;
                    break;
                }
            }
        }

        swapCurrencies() {
            const fromSelect = document.getElementById('fromCurrency');
            const toSelect = document.getElementById('toCurrency');
            const fromSearch = document.getElementById('fromSearch');
            const toSearch = document.getElementById('toSearch');

            const fromValue = fromSelect.value;
            const toValue = toSelect.value;

            fromSelect.value = toValue;
            toSelect.value = fromValue;

            const fromSearchValue = fromSearch.value;
            const toSearchValue = toSearch.value;

            fromSearch.value = toSearchValue;
            toSearch.value = fromSearchValue;

            this.filterCurrencies('from', fromSearch.value);
            this.filterCurrencies('to', toSearch.value);

            this.clearResults();
        }

        async convertCurrency() {
            const amount = document.getElementById('amount').value;
            const fromCurrency = document.getElementById('fromCurrency').value;
            const toCurrency = document.getElementById('toCurrency').value;

            if (!amount || amount <= 0) {
                this.showError('Please enter a valid amount');
                return;
            }

            if (!fromCurrency || !toCurrency) {
                this.showError('Please select both currencies');
                return;
            }

            if (fromCurrency === toCurrency) {
                this.showError('Please select different currencies');
                return;
            }

            this.clearError();
            this.showLoading();

            try {
                // Using ExchangeRate-API directly
                const response = await fetch(`https://api.exchangerate-api.com/v4/latest/${fromCurrency}`);
                const data = await response.json();

                if (data.rates && data.rates[toCurrency]) {
                    const rate = data.rates[toCurrency];
                    const convertedAmount = amount * rate;

                    this.displayResult(amount, fromCurrency, toCurrency, convertedAmount, rate);
                } else {
                    this.showError('Conversion failed. Currency not supported.');
                }
            } catch (error) {
                console.error('API Error:', error);
                this.showError('Network error: Please check your internet connection');
            }
        }

        displayResult(amount, fromCurrency, toCurrency, convertedAmount, rate) {
            const resultDiv = document.getElementById('conversionResult');
            const rateDiv = document.getElementById('exchangeRate');

            const formattedAmount = this.formatNumber(amount);
            const formattedConverted = this.formatNumber(convertedAmount);

            resultDiv.innerHTML = `
                <strong>${formattedAmount} ${fromCurrency}</strong>
                =
                <strong style="color: var(--primary-color);">${formattedConverted} ${toCurrency}</strong>
            `;
            rateDiv.textContent = `1 ${fromCurrency} = ${this.formatNumber(rate)} ${toCurrency}`;

            document.getElementById('result').style.display = 'block';
        }

        formatNumber(num) {
            return new Intl.NumberFormat('en-US', {
                minimumFractionDigits: 2,
                maximumFractionDigits: 6
            }).format(num);
        }

        showLoading() {
            const resultDiv = document.getElementById('conversionResult');
            resultDiv.innerHTML = '<span class="loading"></span> Converting...';
            document.getElementById('result').style.display = 'block';
            document.getElementById('exchangeRate').textContent = '';
        }

        clearResults() {
            document.getElementById('result').style.display = 'none';
            this.clearError();
        }

        showError(message) {
            const errorDiv = document.getElementById('error');
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
        }

        clearError() {
            document.getElementById('error').style.display = 'none';
        }
    }

    // Initialize the currency converter when the page loads
    document.addEventListener('DOMContentLoaded', () => {
        new CurrencyConverter();
    });
</script>
</body>
</html>